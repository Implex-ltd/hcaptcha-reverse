import os, base64

__n__ = "DDUweMPWJjDQIHD4sb8xj7lIcg/8qt4nGSTEa7GwOPFBpZB8TzjubCI6YwuNKdKdP5Xg79709P1wbxlCYayEDP5wIbXKKMgQMbjquhAhr1AL9XU5Q+apene2Z76DLctS6rdVbQMERkbb3w5KLAnOBLnyfB/pMt13xJY4lX61OepTbO0AEE2mBSZnUat++4QNoWJbt4e9czcFZ7Cm11A4S1uoJl5gliLd3wkrOSLKRkF+BfJUzRFG4gLYecrBAV4ot7AprsWPtWu9XS/rthTA0u2Q3xRAEh6Y6tWpVNIQEW4BR4vVkBqmlt0Spl+q8mvSrCrkK4GwE/aDxTOgWUzFA8abPbMIJI48EjTcGWirWtP6oOY2H9NjRET2rZ0J4RsIadBgEyP9owtPKRjURdItRhMrd1Yst/jaCVOWn3flo0pZb/YlOZllqH7z3On4RF/VBMvJVQrctjfmP4SUUNf9IXeL3hlLJJD8ifAHnw00gGT2BMdWHnojhTryfaQIzPjvGVtQc8zvWBIXlFKrsUMFm0GglpvRs/VkrUPZTCr70droyg+1Lpjcj2fchGPRHMfHC+06HvzPYXIIuofF9CfFMfC+j1e0cmuMLgUR9mQyTGLVyIjrxnhgE8pURI6mk7Hn59n4B/DEdNIcfEPzdKK8tfzuam/8xTeyR3xzxib//rQhvGDBVj3jJDd6ZwcryLDbHm3dyk0KE4PJJPmTrzcpzXf1CLorbQZVt/VmH1wqBEO/p45KYdG8IGQc37kl/PpOOTVcn60CXz2lsT+3QlMaPYIVPDd0+AaBDbiTCztNIkB6vayaCIs5zOZ1tNVQaKFpvGeC5x9O5REzkQsdIajGjHKpv+mTHb3IjRhpGpN8ynbueP/nkBmT7vsdbE8LMuGoZqipja2b6z5v5I31GxGxFLN2mGhHGm6E29b1d66f70uvLYHowT7JIhy3UqgdJPnlBeVlqjbKFG3ed9QY1+k18z45/VtAXkykC/nQWUtshx46G6pEhaEH0N+Yn0vjBN4lBGVGccPz1I78/ghAOOB2JILbPoC69vVS9SCDiPkHjuFb1PYIc7Ys2R9mjJBD1a4zl4sLHjpn7GTVfwT8wpjLlIUO4xZwdk+M+f1DCj70Gyta2Qw5KhhGUjz/b/TwsrqVXNVBEo0nvZMlbe7B3usTNqUAcZ4THkaGocBh5e4g191T5vWIHOXVgXW5Fb2aFR1Oz/6Iu2bKaAC2ZXMKhWzEyPCbDDbv7oSUGEl7a4W9qzTB1+qlbH4YNWejixjoEpXZ5MxACPboZ8cCsu1x/R85TMDML7mgMwIpxyuljIB9lBy9c+ab4pUJKmq4gPNxKXosca1goH5wJY2agoHf/mb8GmanpV3BiPWU3AaLqyMO/zJ8FuJNYri4fXKMLtNStRjf/Xr40cvoafZRQdYckWs3qqfDkz2H+jcHFWco0dnI05VxsviQR6h8qpww5xv0dCAunKOPu0Fx2SNhdo3OTsTfYKoBoXLoAhk7dObSOxA3ObTHHbG5EsKzhL55bThqHZ9o8tVjsaMQMJRxAlRrsGl2s7RkVUl14h0Bv7PBod4yxL/rnxMenq/dbrOmMzFVDwtcT7Kt0UFFF9oYIUk6pLdjWsiT0etvSj2a7KeMkyuj0OTVRB+EStz8fQ/eP0VXO0JyvvL5UglswO9PdMeLpwDOxzEz7EP80DrRkKy94zv+oIHnVlrDzzCth9okVxjw8Nbt1X4MHMZDuwGJP+CNeA+kWCJZS9woing4Z2cew3a5z5Kg5+d4ehnsIKPFF8WjLNzY36zO6sJxxblZDEO2KhlfaWBBnIswdbMig96wgEyPaUVbOh4zQxLkukJF1XgGZq0uttIgZqMuhFPzVNMMv3iDXdFCYt0IG6fol2ntLoL5mBzZybjB8shhKZotGSDvlw3GLbO9fciitMGE/g0dwiT/SH/i8PIsTw2tgcPqFlaSH64DGOjmtHA+Ll8xoA8vWmPjg65EFYsvTsA+Ymnof+syU/CeSuDiP0CGil+7wTEDTWTaa6/yi3YVC+GUHQjriXprAuP3k5G1rpSFYjmZ/EmNA66zP+g2cW6MQxZe0MoNVnmCkmwcVr3oO6uwIuwd3EIfqhnSTDjQByhcHotf0Qi1LhBSE3Q7rms63oxdACC+rHhhoNmxZcA3v9NrpOJTx1wocN/iBq2yO8ORVfZDhHttu6T7eVqCCVANFbZ9nXsv16mezj6U+MduoQ572ONpLe0KfkrUqw1MgATIx0ERECHL2mlW3JOQZagumLuOP2rqBaLIqU8WdhLffZ9g4I01dqzBe7MyW5rVWWw7W2Yop9moWhJ+gDxlPjpUrBz9UZZLwIZfHPsMHoO2TNjK2yCc+AVc1BhBZK3QXnbUzomHQySTdHuDfJIuOPczbwKPpHoNwfovWZjaFacDhFXrm9JJA/lsucBr2fvwpL1ao5XpNz1nhYA4OXXzd4PXpytitFm7FQuk8jA9hcMpGmRz5fE6CYvqkL2dQ1FlBz3GHu/L7Xi8GRhp7O0B7kB1RawF3+ygOzxAHPCF0DL1Faidr8Q83Sqvw+UDN/Va+FZjTjkIuv9yEsDc6FZgLvlr7hg1jXbS+1aSsxxL0GFV0to2u5R4aRBn7Vxw/KWlsMUBsnCCOCdYSXebUGaBuSwfRFRVwyL24c4wsotGC0kBA89U4IuE4Eep5BycKX1cUzqeplPLgquUw85VWP6AevRjjaKm9W76BulmVIW2poBbv1cc8Udchz5ZALvlXlf7QOokBEW4Ua8fvh8QAb/nkfwwQWl4zfVGdI6uYyXtrFMH/LoMBaQfJJrKs6I/B/Iy/Gfl8NhAbH091vdI5t5sCxaitLDku2JlOOTzDgqLPXN/9WTFMvVsFXRNldteiLVoN5az6VDibFltwkX1d8RREISDa9Pc/Mrj0Kua8YWX1oQGDatvvum+SyhRYa6EEj16dWGupQ+7zL0Aa9D7P0gfUgdi0GKb7n70BUvgT8uyC+IocKFQmBhkj2Vf3wS6aITvJJHIdNvwVh8fL8ADG98MJoNPwhAh8J7PPRqwV0K7DQm0hRYgkNYvL/m+I3YHtT+dlU+yDYlWYC07iZ++cEjWCrjDNYpXwJuvznvLnHLJgQ6HJu3fD5b1SnMfmlNcggOUitC0EcdXp0oWz8dch0wfO0+LbX4WwBc1WEfPfncM0oRLmxDQbYyqBqkIQcad94Rhau//x7wiaBYOAW55E1yI/TXlMXEhdlUMKLbEzXmYTAg4jPjYT6iOMvMlMjYL70lqG3Ur7r7Se8+KVo2y3hGheoi13k9w5RoRfYfUP2LRQ9dRRcSePRrS2h1Cqd2o+MqS1BHkEH9LzTH+qHfkqtj6xJZoZmka925EYbxm14RiAhUoI6QDXPl+geNf8GaHeodgkCbjpb6iL9cVS80Be3/zRklNU3PcyzDSxiVxmzQmULYuSi0o2S/aXEul21fwQuM3dqQ+t25F8MyLwbSFXsuzfqrpXATCNt6ioSdOHCc3iRK4Vk6df6W8PdMQfFaPkcrnAonohhZLG6oGATntHujDBrxLAL5TDQDoo5Jp82glpG+zOAEySfSokV9KiUE8DvyqWPRl1Hm3Fp/MsWrBt3V6Tvx+heCCReRi61PAQIESe+j2Sn8yWEXZGqsXv0RTU5dshZQvLO4jrsWEFFXT6LGS5cvKQ3eMhpLJJXobsOLXBy94qxOawSTpJS3kJtmWZ2Oc5ws3pLToBIhbQ1cBbi9gvLiE/k7oIiauGJaBEqm8M8Ei4wvXfoa/q4M92v+qrYfNoa1r2ImLPDbm2GgapLqUqByOXuf+5a+BQtMux5r6h1CBNbeR+j5VbQodRTl74ut0rfaFUXxBcfsok2i5ZvIYBL8eN91dCYRKpTCcpirPbUohyISe+qwAly9nzb2ZENXxOERz8odjNdFAvAf6sLFiFu3qFNSyn5hS4ru1dasFvgcjlEL5B1wqK4oK+jHZ3pJ03IyBJMM/mmwoXww7agrtoiJ3TcvopB12bi8E25C77wuxLgoLt/aC+vc46V68rZN8rFmQvMyzR0A1i6IfjCrrSyUNYU/emi+cQua1Owgu8iopssUtKZuK3s2FUGTOlFt7M0VrkmOGvh97bhOBVYPLHo0bsGavrDGqX5/0cuUGXd68AcSZccRcBKnRTO1kjYOKFSKW2v5UNjVnuwshVnZXp4tey8YEhF0nVqWeQYJTvcrYhvN0Zlqo+pG1ey+PHzIegvxpVwtbFpYs2SUbo+QfLipbmqi50CHR2+OrcWjpfLcFBs2EhK5vI/OAhG3QIj9dyhCBP/73wfBKX9071YFcwDpcdh4wCIcXROO8FSEvF8/73o3N5nuFYv1NuqpRHiQ/yQPktOkvTFz/kGiLf4ymcHOpPRy9kME/tLCIm3iKsouqA7mgvEbDave9VGjw4DAGVB35KCMtLVMlLdsf3eML628yNV4Mv1ZAtONuJgjhwdNdNYtxfUYOeN/jNtbbvZWfgNWh8ILhi6YY9kWwtMnJt2/96h1gfq7Mxagw9oOUcxvQ51GW6JkRoygP+HjccLYhDnji7BUR7L0hqUK71rBR4ADzRNWMD/fhoDNzNMB4T4DupiAWNakY7mjute1cR8jRCjWlNkn5+kxAQtJ05qz732F/fUsuoo7ZytOznC8HBaGCy3fX0+3KpeNtAJyN8hCIlA2VWhEPG2KWdGNHtikq0nDtGM9GUW+gdR4tiwrIPQ6+2j9uhZSgEHn/+o8Q0muul9rU0JlUUiPygjcNPScyX2FIK2vRXXlmg4D3etV8WDczNVbuqew+/oFIN5yA/xYtJ9NKTl7/z2EGboZEnOX9b4RqXmE3SWYateShz0sOoRDcOjheOFQYYm162S7svmA0l6nvL2D3JWZJUUH7oYl+VhgKrqsF6OzyTi/XgGjEu12qW0f604T/0t/MtDaPbqKx+l+kN4ygIRv5+2GDmTRPVNEqxt1gAtIx+X437sdai6wXW2P0JYie4fV4wRy6qhGPoCfu7zM4RSSiQkbGaYTqFeivaMk4ENilaOn8dFaktT/lR9GVebnk6Qpp2Hvw97rToRTlPhXgAM3JxODVISNQokrKdHbb6GDpIZ0pQV4xdt+x0Dwf3EW84RVVvK9Thc9TQjaGZFvGZFTibSVTICDo8tn4wSGVOFDAdyeq/WgcfIX/2AJfRMd2opcPcXu9iXO8QA0j9My4iAB++WvvzuAHqpknUVr2zc8OtSJbeae0W5R6nti3z3BqNue82m13eA4G6Y9ANlUTrvblRkGYoJprEeH/FcA/UVwqAz23Dfr57vTORkniWT7GCrYzMc2dvvmOVzIpgZ0I7zesOIr73nGaLmZWdgBWc8NL1KFFqPIpemTmFF9Udl2dGkY52UP3jXffj/ulv/HlB7cOL18jnDehhP6iK1OcN3J2gEd9diQ6hSacL3zV7I3OgOpYz0t/tx2X9QIwxV77S8cuF5u0nZWJRR0DR6mBhbICZ577Cc5tXNTn5OjLo1JbhYKecEI2uhywlNnJ2tlM7eJ2YUE7W1GM9UpcfB4FdCIf0lwRma7t46vWRUdvVeG1aypxM9TCxFPip40Ep9L6XVLrWFnFE5EM+udOEy6Qb/hNhav8xxPFG8do4+ggbxxa2qcKheWbMnWf2AKhbuljISh5Di6nO+zn4kZUkaaHucI7/mF5sAblZzeMyaYbzAgLjD7QtB+gZwB2ev5uNpv2199erYE+7kNlis4tX3+OO2thrGhL1gCjr1ikdb71kT1xKAB64mxKGXcYUfW3vGfJbD9ePKKTbnIY2mbcuDhZuzuBpW03fzjcEor3K1rvRkfoHYqZ6HTsS8SV5EjTjU3z/EHAajPwaY7esTvf8KMJohIqzNBe3lCiqbwmlj28k3LfNFvJsFSIdxhvcKUGYxM4lig5Xn2PjtmbEgCZRhM9QzHgfUtN2PbJ2Zg8yALfKaGdjBS8JzfSgfVX6cheZ5EXTUvKI0dH86eDSbP2QEtyjQeShPcy2/1pjtN74wLW9e0ztPz31irCSWaKR+mnwWa4Ar145H+49KTQvzxt0/RyeFR6Qgrm9yR3WHLa5P68Z2mKEnLAdexxHJh9E+QzrBp94q1AzrU7Bl0G8fxNCs/L3sTpZUvXTC70TuL9a71BwkAEoMvJIdWJuE2l0VVMEJZIAzSmfndPW8NigCHYQhaCuM/5stKM2B05RdYLuqmP2l8/ophfVgXSFpPHziGyV3MTYP2FWaXK9c8GlsylOya26BBrO/3yuJMq8YG0mo5ZCRaLxZNmztbRJTGdVUtZzcGfLKbHmk832wZeMD06wyCIvv2jsPfFzT3L/QQz2CqWO01B7S16uuYJ1DJvCYQjIlg9u1yuHW3+3ML3oMLdUlT1d5lvqCEnvG/kweuaak66oJahO0Xix8K8phnOUW+Nm1v8/ubl3pSOoLfOvL94lArPubUyr2t9uFvR2TeTvkafKtqcGuO6hsDnvNiLZBPyN4b+S88N3a3mvF6IyL3qGwJ0hh/qQ9hIoIZ//uVFI00fOmIM+stxDlekL9AoS9QL4Tm715cSNnxKsghRicmp6T/ddr2k6jHTU+eDgafofOZTBCrUnoV+Kkr4LBKW1VJUAqE5jdn8YO0zZc107fLZVHI4rfehaFmnhnrzYuZb3pWEcETICJV/ZR6URhyrKZOIz1gibj78uiXtgvAhpNqIXG0tcHqsJBm7E29KuO6g34rQPWMfgBMuOmIxvl8p+pb9DW7erkhLH22YFsuqlLHVZwzkE50Iv1pZNH4GYR5h8oQkNOcqzIhKr6WZMtC9ZlT09/lujLj5hSZbcOKxQcQyJ+Es0S70RHc5TfaaZReQvEMWPdpe7ProCVo68WTHgo3QU48nPlVv/9y51M+HkPSUR5G/Kx5XwwyOvStM9aK5NmbvdPdxt1S+k521oLl6+1CTZQL3Jjl/UCxKPHHiEEeglX7Y6IwCDCg7fXv4T2cbYah3plZxi4+TgOW6L7vVh67BNPx0HXzxQhn/u2nUrSGrb6H9smpLRBUp0UHOMRSy+o/B9PWxEVZEo0QvdzceMHlToWveYTp747GZjVo6RcNJrNXllCiY5tJ9WdmCk6jp3IpT3ODY1XWCr9yvAiWp7UPa4SJXx4SS27/WD3Dt+9D5NdwB2V8NRxGXd78ScalAqJWbxhZgPRI6hdSdgslokudMH6GDdQpQKd+7qSQXuVCe2YNVHybz8RtHL+kv5SSQD2FihLmZxzWjGCr+tmCRPF/nk7hWinAqZLy8Ulai6gO+DB5ZPqM3cp84+qaE4NNpjloc3ZY9mwxlzhAMQwTheWwPtlloBuWxyiz9pBPfW1dEbreNXDcpAdvOmWceYJjzE3D63S/XwgJNVZP4Tghhlzdz7lysbALTR+/8lY3pfIiyf1EzZV4e2pHPkx0Y3+Q5CPdMX7I7M6kM+ul/HNn9DSE4d5dZ5aW8Lb17i+7WG1Bgs8VdDWvwz+jqvOHADFAklF2IRFRzbnNK6s8fGwWcM6DqepxqVOXXkqC4iVBXJq+KIN3qjqdseVgJygpGxdJ8trNR0vJZ/EsIt/QtPWB7xtJOiIcOjJKorqDMiMCLqbF0rHAAz8iqANPijmtMW7zD7V4+3a0f/aCS5oE1iUhoSlCR9V6tv7o0gR195paoHzzlemYUveFQ1StjqmPBP6BAEUIO2Rl+7u5nQI0rLX5LZnZPf63WGGea5H7oXmOyVh9j01qDIkjSQZm+NEr5K0MJVCT+gubiVEhdKhl2oX0R89oisPDMqF4pHjABaDmzGtldUDd6FpGGiWHVfQOr9R2bcE6mOfo/Fs70m9P0Iz0nL/Xh111WT9dXfOdUex3UkrpkRkj7RZ+LtkCEA8480lNlOJOA3LyF4oKb397wTBa2W42JdlS5ahQYkdMEHM8v18NQ4+HQohfuwxfxArApameEZEGFXA6asGjuJpWY+YcEQYySuoyIkOcJfZLhzWtp/f/TQiZVRLgybIEm9SPR5xeZvjLMBLRj9TsMkBXUkWa9lZGMAkci8LlsKqTLgy4dFEFy2m13hhmH3YaKHZdyelS7T3123ZXZ9dpVwg/lT/Dx69j6k2HYCHXrPW2CiwMyv2S1pA9do6urd0InkvT1xJKH/FdGxUAGMDQQ3Hvb0ydVRq1Zg+dVzfD1eKlkXt0Wrlo3VgYx0TsA52JJd07UX+JkCSB8UmCve+q87+oi8WQiZ260fA1VmDKXUV89/os6ct5ZX6bHS+DzEdgu815VtTJ/cS2+tsHqjpy+kGfq+b2S2RWkhYcTnfabxI6nk9v2OQBQT5CH3UJHHhhk5xLth/uxB0u13fMaMiVpNBasyyScng79TM394AjYQP+bwQ3WCMocjO4/NZHYoaOzw54Rfofu8h8u12b3+RACF+NaA+x2V40FwCubUx0TSNkIj2H4m0kOipkMsun0Wj0yfcHvemdgvmnCHo1HMoJjAqLLadUFkxwunI7O59l+CrajLLOvj5Um88fd8qwcgAd+jguRQiCCAA=="


class CustomWASM:
    def __init__(self, stub_path: str) -> None:
        self.path = stub_path

    def compile_wasm(self):
        os.system('cd assets && wat2wasm custom.wat -o build.wasm')
        print('[+] Wasm compiled')

    def build_custom(self) -> None:
        with open(self.path, "rb") as f:
            return base64.b64encode(f.read()).decode("utf-8")

    def replace_wasm(self, b64: str) -> None:
        with open("./assets/stub.js", "r+") as f:
            with open("./out/hsw_bind.js", "w+") as hsw:
                hsw.write(f.read().replace("|replace_wasm|", b64))
        
        print('[+] hsw wasm replaced')

    def run(self):
        self.compile_wasm()

        b64 = self.build_custom()
        self.replace_wasm(b64)


class N:
    @staticmethod
    def parse_n(n: str) -> int:
        buff = base64.b64decode(n)

        byte_arr = [b for b in buff]
        bytes_length = len(buff)
        cipher_text = "".join([chr(b) for b in buff])

        print(
            f"""
        \r[cyper-text] {cipher_text}
        \r[n-bytes] {byte_arr[:50]}
        \r[n-len] {len(n)}
        \r[b64-bytes] {bytes_length}
        """
        )


if __name__ == "__main__":
    # N.parse_n(__n__)
    
    CustomWASM("../src/assets/build.wasm").run()